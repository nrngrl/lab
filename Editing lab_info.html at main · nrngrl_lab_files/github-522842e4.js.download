System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var e,t,s,o,c,n,r,a,i;return{setters:[function(o){e=o.r,t=o.a,s=o.o},function(e){o=e.o,c=e.a,n=e.S,r=e._,a=e.q,i=e.V}],execute:function(){e(".js-toggler-container .js-set-approval-state",(async function(e,t){const s=e.closest(".js-toggler-container");s.classList.add("loading");const o=await t.json();"approved"===o.json.approval_state?s.classList.add("on"):"denied"===o.json.approval_state&&(s.classList.add("revoked"),s.classList.remove("on")),s.classList.remove("loading")})),e(".js-request-access-approval-form",(async function(e,t){await t.text();const s=e.getAttribute("data-container-id");document.querySelector(`#${s}`).classList.add("on")})),t(".js-suggested-usernames-container",(function(e){const t=e.querySelectorAll(".js-suggested-username"),s=document.querySelector(".js-signup-form");if(s&&0!==t.length)for(const o of t)s.appendChild(o)})),o(".js-email-notice-trigger",(function(e){const t=document.querySelectorAll(".js-email-notice");for(const s of t)s.classList.add("notice-highlight");e.addEventListener("blur",(function(){for(const e of t)e.classList.remove("notice-highlight")}))})),t(".js-plan-choice:checked",{add(e){const t=e.closest(".plan-row");t&&t.classList.add("selected")},remove(e){const t=e.closest(".plan-row");t&&t.classList.remove("selected")}});const l=new WeakMap;function d(e){const t=e.target,s=t.closest("form");if(t.closest("input[type=text]")&&!l.get(s)){const e=s.querySelector(".js-signup-source");let t=e.value;e.hasAttribute("data-ga-label")&&(t=`${t}${e.getAttribute("data-ga-label")}`),n({category:"Sign up",action:"Attempt",label:t}),l.set(s,!0)}}function u(){const e=document.querySelector(".js-password-with-confirmation"),t=document.querySelector(".js-password-confirm");t.value!==e.value?function(e){const t=e.closest(".js-form-group");t.classList.add("errored");const s=e.getAttribute("data-validity-message");if(s){e.setCustomValidity(s);const t=e.closest("form");i(t)}const o=t.querySelector(".error"),c=e.getAttribute("data-error-message");if(!o&&c){const e=document.createElement("dd");e.classList.add("error"),e.innerHTML=c,t.appendChild(e)}}(t):function(e){const t=e.closest(".js-form-group");e.setCustomValidity(""),t.classList.remove("errored");const s=e.closest("form");i(s);const o=t.querySelector(".error");o&&t.removeChild(o)}(t)}t(".js-signup-form",{subscribe:e=>c(e,"input",d)}),s("submit",".js-signup-form-submit",(function(e){const t=e.currentTarget.querySelector(".js-signup-source");let s=t.value;t.hasAttribute("data-ga-label")&&(s=`${s}${t.getAttribute("data-ga-label")}`),n({category:"Sign up",action:"Submit",label:s})})),s("submit",".js-org-survey",(function(e){const t=e.currentTarget.querySelectorAll(".js-other-text");for(const s of t){const e=r(s,"js-other-hidden-input");e instanceof HTMLInputElement&&(e.checked=s.value.length>0)}})),t(".js-show-next-question-trigger:checked",{constructor:HTMLElement,add(e){const t=e.closest(".js-show-next-question");if(t instanceof HTMLElement){const e=r(t,"js-hidden-question");e&&(e.hidden=!1)}},remove(e){const t=e.closest(".js-show-next-question");if(t instanceof HTMLElement){const e=r(t,"js-hidden-question");e&&(e.hidden=!0)}}}),t(".js-octocaptcha-parent",(function(e){const t=e.querySelector(".js-octocaptcha-spinner"),s=e.querySelector(".js-octocaptcha-success"),o=e.querySelector(".js-octocaptcha-token"),c=e.querySelector(".js-octocaptcha-form-submit"),r=e.querySelector(".js-octocaptcha-frame-container"),a=e.querySelector(".js-octocaptcha-frame"),i=o.getAttribute("data-octocaptcha-url"),l=o.getAttribute("data-octocaptcha-timeout"),d=l?parseInt(l):3e4;let u=!1;const h=()=>{u||(u=!0,t.classList.add("d-none"),s.classList.remove("d-none"),p())},m=()=>{if(u)return;const t=document.createElement("input");t.type="hidden",t.id="error_loading_captcha",t.name="error_loading_captcha",t.value="1",e.appendChild(t),o.required=!1,h()},p=()=>{e.checkValidity()&&(c.disabled=!1)};setTimeout(m,d),a.addEventListener("error",m),window.addEventListener("message",e=>{if(e.origin!==i)return;const s=e.data&&e.data.event;var c;"captcha-loaded"===s?u||(u=!0,t.classList.add("d-none"),r.classList.remove("v-hidden","zero-height"),null===(c=a.contentWindow)||void 0===c||c.postMessage({event:"captcha-loaded-ack"},i||"")):"captcha-complete"===s?(o.value=e.data.sessionToken,(()=>{const e=r.getAttribute("data-ga-event-category");e&&n({category:e,action:"success",label:"captcha verified"})})(),p()):"captcha-suppressed"===s&&h()})})),t(".js-survey-answer-choice:checked",{add(e){const t=e.closest(".js-answer");if(t){const e=t.querySelector(".js-answer-choice");e&&(e.classList.remove("border-black-fade","bg-white"),e.classList.add("border-blue","bg-blue-light"))}const s=document.querySelector(`.js-other-input-box[data-other-input-for=${e.getAttribute("data-question-short-text")}]`);s instanceof HTMLElement&&e.classList.contains("js-other-choice")&&(s.hidden=!1)},remove(e){const t=e.closest(".js-answer");if(t){const e=t.querySelector(".js-answer-choice");e&&(e.classList.remove("border-blue","bg-blue-light"),e.classList.add("border-black-fade","bg-white"))}const s=document.querySelector(`.js-other-input-box[data-other-input-for=${e.getAttribute("data-question-short-text")}]`);s instanceof HTMLElement&&e.classList.contains("js-other-choice")&&(s.hidden=!0)}}),t(".js-allow-multiple:checked",{constructor:HTMLInputElement,add(e){const t=parseInt(e.getAttribute("data-max-choices")||""),s=e.closest(".js-question").querySelectorAll(".js-allow-multiple");if(Array.from(s).filter(e=>!0===e.checked).length>=t)for(const o of s)!1===o.checked&&(o.disabled=!0)},remove(e){const t=e.closest(".js-question");for(const s of t.querySelectorAll(".js-allow-multiple"))s.disabled=!1}}),a("keyup",".js-password-with-confirmation",()=>{""!==document.querySelector(".js-password-confirm").value&&u()}),a("keyup",".js-password-confirm",u)}}}));
//# sourceMappingURL=github-29086945.js.map
